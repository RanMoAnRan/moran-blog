{{ define "main" }}
  <div class="container term-container">
    <div class="content post-detail-container term-page">
      {{- $taxonomyPlural := .Data.Plural | default "" -}}
      {{- $taxonomyLabel := "主题" -}}
      {{- if eq $taxonomyPlural "categories" -}}{{- $taxonomyLabel = "分类" -}}{{- end -}}
      {{- if eq $taxonomyPlural "tags" -}}{{- $taxonomyLabel = "标签" -}}{{- end -}}

      <header class="page-header term-header" data-taxonomy="{{ $taxonomyPlural }}">
        <a class="term-back-btn" href="{{ printf "%s" $taxonomyPlural | relURL }}">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><path d="m15 18-6-6 6-6"/></svg>
          返回{{ $taxonomyLabel }}
        </a>

        <h1 class="page-title term-title">
          {{ .Title }}
        </h1>
        <p class="page-desc term-desc">共 {{ len .Pages }} 篇文章</p>
        {{ with .Content }}<div class="prose">{{ . }}</div>{{ end }}
      </header>

      {{ $paginator := .Paginate .Pages }}
      <div class="post-list">
        {{ range $paginator.Pages }}
          {{ partial "post-card.html" . }}
        {{ end }}
      </div>

      {{ partial "pagination.html" . }}
    </div>
  </div>

  <style>
    .term-page .term-header {
      --term-bg: linear-gradient(to bottom right, rgba(237, 233, 254, 0.65), rgba(238, 242, 255, 0.65));
      --term-blob: linear-gradient(to bottom right, rgba(124, 58, 237, 0.22), rgba(99, 102, 241, 0.18));
      --term-badge-border: rgba(124, 58, 237, 0.22);
      --term-badge-text: var(--violet-600);

      text-align: center;
      margin: 0 auto 20px;
      padding: 44px 24px 24px;
      border-radius: var(--radius-lg);
      background: var(--term-bg);
      border: 1px solid var(--border);
      position: relative;
      overflow: hidden;
      box-shadow: var(--shadow-sm);
      max-width: 1080px;
    }

    .term-page .term-header[data-taxonomy="tags"] {
      --term-bg: linear-gradient(to bottom right, rgba(255, 251, 235, 0.9), rgba(255, 241, 242, 0.72), rgba(245, 243, 255, 0.62));
      --term-blob: linear-gradient(to bottom right, rgba(245, 158, 11, 0.22), rgba(244, 63, 94, 0.20));
      --term-badge-border: rgba(234, 88, 12, 0.22);
      --term-badge-text: var(--orange-600);
    }

    .term-page .term-header::before {
      content: "";
      position: absolute;
      top: -92px;
      right: -92px;
      width: 260px;
      height: 260px;
      background: var(--term-blob);
      border-radius: 9999px;
      filter: blur(10px);
      opacity: 0.9;
      pointer-events: none;
    }

    [data-theme='dark'] .term-page .term-header {
      --term-bg: linear-gradient(to bottom right, rgba(124, 58, 237, 0.16), rgba(79, 70, 229, 0.12));
      --term-blob: linear-gradient(to bottom right, rgba(124, 58, 237, 0.30), rgba(99, 102, 241, 0.16));
      --term-badge-border: rgba(139, 92, 246, 0.25);
      --term-badge-text: rgba(221, 214, 254, 0.95);

      border-color: rgba(139, 92, 246, 0.18);
      box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.04);
    }

    [data-theme='dark'] .term-page .term-header[data-taxonomy="tags"] {
      --term-bg: linear-gradient(to bottom right, rgba(251, 191, 36, 0.12), rgba(244, 63, 94, 0.10), rgba(139, 92, 246, 0.10));
      --term-blob: linear-gradient(to bottom right, rgba(245, 158, 11, 0.18), rgba(244, 63, 94, 0.14));
      --term-badge-border: rgba(234, 88, 12, 0.25);
      --term-badge-text: rgba(254, 215, 170, 0.95);

      border-color: rgba(148, 163, 184, 0.18);
    }

    .term-page .term-back-btn {
      position: absolute;
      top: 16px;
      left: 16px;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 8px 12px;
      border-radius: 9999px;
      font-size: 0.875rem;
      font-weight: 700;
      color: var(--slate-700);
      background: rgba(255, 255, 255, 0.72);
      border: 1px solid rgba(226, 232, 240, 0.9);
      backdrop-filter: blur(8px);
      transition: all 0.2s;
    }

    .term-page .term-back-btn:hover {
      color: var(--term-badge-text);
      border-color: var(--term-badge-border);
      box-shadow: 0 10px 15px -3px rgba(15, 23, 42, 0.08);
    }

    [data-theme='dark'] .term-page .term-back-btn {
      color: rgba(248, 250, 252, 0.92);
      background: rgba(15, 23, 42, 0.55);
      border-color: rgba(148, 163, 184, 0.18);
    }

    .term-page .term-title {
      margin: 8px 0 4px;
      font-family: var(--font-serif);
      font-size: clamp(2rem, 4vw, 2.75rem);
      font-weight: 900;
      letter-spacing: -0.025em;
      color: var(--text-heading);
      position: relative;
      z-index: 1;
    }

    .term-page .term-desc {
      margin: 0;
      color: var(--text-muted);
      font-size: 1rem;
      position: relative;
      z-index: 1;
    }

    .term-page .post-list {
      display: grid;
      gap: 24px;
      max-width: 1080px;
      margin: 0 auto;
    }

    .term-page .post-list .post-card {
      margin-bottom: 0;
    }

    .term-page .pagination {
      max-width: 1080px;
    }
  </style>
{{ end }}

