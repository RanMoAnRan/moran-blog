{{ define "main" }}
  <div class="container">
    <article class="post">
      <header class="post-header">
        <h1 class="post-title">{{ .Title }}</h1>
        <div class="post-meta">
          <span>发布于 {{ partial "post-meta.html" . }}</span>
        </div>
        <div class="post-tax">
          {{ partial "terms-inline.html" (dict "taxonomy" "categories" "page" .) }}
          {{ partial "terms-inline.html" (dict "taxonomy" "tags" "page" .) }}
        </div>
      </header>

      <div class="post-layout">
        <div class="post-body">
          <div class="prose">
            {{ .Content }}
          </div>

          {{ $prev := .PrevInSection }}
          {{ $next := .NextInSection }}
          {{ if or $prev $next }}
            <nav class="post-pagination" aria-label="文章导航">
              {{ with $prev }}
                <a class="post-pagination__item" href="{{ .RelPermalink }}" rel="prev">
                  <span class="post-pagination__label">上一篇</span>
                  <span class="post-pagination__title">{{ .LinkTitle }}</span>
                </a>
              {{ end }}
              {{ with $next }}
                <a class="post-pagination__item" href="{{ .RelPermalink }}" rel="next">
                  <span class="post-pagination__label">下一篇</span>
                  <span class="post-pagination__title">{{ .LinkTitle }}</span>
                </a>
              {{ end }}
            </nav>
          {{ end }}

          {{ with site.Params.post.license }}
            <div class="post-license prose">
              {{ . | markdownify }}
            </div>
          {{ end }}

          {{ partial "giscus.html" . }}
        </div>

        {{ if and (or (not (isset .Params "toc")) .Params.toc) .TableOfContents }}
          <aside class="post-aside" aria-label="目录">
            <div class="toc-card">
              <div class="toc-title">目录</div>
              {{ .TableOfContents }}
            </div>
          </aside>
        {{ end }}
      </div>
    </article>
  </div>
{{ end }}

