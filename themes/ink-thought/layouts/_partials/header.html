<header class="site-header" role="banner">
  <div class="container" style="height: 100%;">
    <div class="header-inner">
      <!-- 1. Logo (Always Left) -->
      <a class="brand" href="{{ site.Home.RelPermalink }}">
        <span class="brand-icon">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"/><path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"/></svg>
        </span>
        {{ site.Params.profile.name | default site.Title }}
      </a>

      <!-- Wrapper for Right-aligned elements -->
      <div class="header-right">
        <!-- 2. Desktop Nav (Now Right) -->
        <nav class="nav-desktop">
          <a href="{{ site.Home.RelPermalink }}" class="nav-link {{ if .IsHome }}is-active{{ end }}">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/><polyline points="9 22 9 12 15 12 15 22"/></svg>
            首页
          </a>
          <a href="{{ "archives" | relURL }}" class="nav-link {{ if or (eq .Section "archives") (hasPrefix .RelPermalink ("archives" | relURL)) }}is-active{{ end }}">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>
            归档
          </a>
          <a href="{{ "tags" | relURL }}" class="nav-link {{ if or (eq .Section "tags") (eq .Section "categories") }}is-active{{ end }}">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z"/></svg>
            分类/标签
          </a>
          <a href="{{ "about" | relURL }}" class="nav-link {{ if or (eq .Section "about") (hasPrefix .RelPermalink ("about" | relURL)) }}is-active{{ end }}">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></svg>
            关于
          </a>
        </nav>

        <!-- 3. Actions (Search / Theme) -->
        <div class="header-actions">
          <form class="header-search" action="{{ "search" | relURL }}" method="get" role="search">
            <label class="sr-only" for="header-search-input">搜索</label>
            <input
              id="header-search-input"
              class="header-search-input"
              type="search"
              name="q"
              inputmode="search"
              autocomplete="off"
              spellcheck="false"
              placeholder="搜索…"
            >
            <button class="icon-button header-search-button" type="submit" aria-label="搜索">
              <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"/><path d="m21 21-4.3-4.3"/></svg>
            </button>
          </form>

          <button
            class="icon-button nav-toggle"
            type="button"
            data-nav-toggle
            aria-label="菜单"
            aria-expanded="false"
            aria-controls="nav-mobile"
          >
            <svg class="nav-toggle-icon nav-toggle-open" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="4" x2="20" y1="12" y2="12"/><line x1="4" x2="20" y1="6" y2="6"/><line x1="4" x2="20" y1="18" y2="18"/></svg>
            <svg class="nav-toggle-icon nav-toggle-close" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 6 6 18"/><path d="m6 6 12 12"/></svg>
          </button>
        </div>
      </div>
    </div>
  </div>

  <div class="nav-mobile" id="nav-mobile" data-nav-mobile hidden>
    <div class="container">
      <nav class="nav-mobile-menu" aria-label="主导航">
        <a href="{{ site.Home.RelPermalink }}" class="nav-mobile-link {{ if .IsHome }}is-active{{ end }}">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/><polyline points="9 22 9 12 15 12 15 22"/></svg>
          首页
        </a>
        <a href="{{ "archives" | relURL }}" class="nav-mobile-link {{ if or (eq .Section "archives") (hasPrefix .RelPermalink ("archives" | relURL)) }}is-active{{ end }}">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>
          归档
        </a>
        <a href="{{ "tags" | relURL }}" class="nav-mobile-link {{ if or (eq .Section "tags") (eq .Section "categories") }}is-active{{ end }}">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z"/></svg>
          分类/标签
        </a>
        <a href="{{ "about" | relURL }}" class="nav-mobile-link {{ if or (eq .Section "about") (hasPrefix .RelPermalink ("about" | relURL)) }}is-active{{ end }}">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></svg>
          关于
        </a>
      </nav>
    </div>
  </div>

  <button class="icon-button theme-toggle-corner" type="button" data-theme-toggle aria-label="切换主题">
    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="4"/><path d="M12 2v2"/><path d="M12 20v2"/><path d="m4.93 4.93 1.41 1.41"/><path d="m17.66 17.66 1.41 1.41"/><path d="M2 12h2"/><path d="M20 12h2"/><path d="m6.34 17.66-1.41 1.41"/><path d="m19.07 4.93-1.41 1.41"/></svg>
  </button>
</header>
