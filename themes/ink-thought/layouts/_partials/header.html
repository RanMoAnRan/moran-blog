<header class="site-header" role="banner">
  <div class="container">
    <div class="header-inner">
      <a class="brand" href="{{ site.Home.RelPermalink }}">
        <span class="brand-icon">
          <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-book-open"><path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"/><path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"/></svg>
        </span>
        {{ site.Title }}
      </a>

      {{ with site.Menus.main }}
        <nav class="nav" aria-label="主导航">
          <ul class="nav-list">
            {{ range . }}
              {{ $attrs := dict "href" .URL "class" "nav-link" }}
              {{ if $.IsMenuCurrent .Menu . }}
                {{ $attrs = merge $attrs (dict "aria-current" "page" "class" "nav-link is-active") }}
              {{ else if $.HasMenuCurrent .Menu . }}
                {{ $attrs = merge $attrs (dict "aria-current" "true" "class" "nav-link is-ancestor") }}
              {{ end }}
              <li class="nav-item">
                <a
                  {{- range $k, $v := $attrs -}}
                    {{- printf " %s=%q" $k $v | safeHTMLAttr -}}
                  {{- end -}}
                >{{ .Name }}</a>
              </li>
            {{ end }}
          </ul>
        </nav>
      {{ end }}

      <div class="header-actions">
        <a class="icon-button" href="{{ with site.GetPage `/search` }}{{ .RelPermalink }}{{ else }}{{ relLangURL `search/` }}{{ end }}" aria-label="搜索">
          {{ partial "icons.html" (dict "name" "search") }}
        </a>
        <button class="icon-button" type="button" data-theme-toggle aria-label="切换主题">
          {{ partial "icons.html" (dict "name" "sun-moon") }}
        </button>
      </div>
    </div>
  </div>
</header>

<style>
  .brand {
    display: flex;
    align-items: center;
    gap: 10px;
    font-size: 1.25rem;
    background: var(--primary-gradient);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
  }
  
  .brand-icon {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 32px;
    height: 32px;
    background: var(--primary-gradient);
    border-radius: 8px;
    color: white; /* Icon itself needs to be white on the gradient background */
    -webkit-text-fill-color: white; /* Override parent */
    box-shadow: 0 4px 12px rgba(99, 102, 241, 0.25);
  }
</style>